blueprint:
  name: Lights Control Based on Input Boolean v2.0
  description: "Turn lights on/off based on an input boolean state."
  domain: automation
  input:
    input_boolean:
      name: Input Boolean
      description: "The boolean that controls the lights."
      selector:
        entity:
          domain: input_boolean
    lights:
      name: Lights
      description: "Lights to toggle based on the boolean."
      selector:
        entity:
          domain: light
          multiple: true

mode: restart

trigger:
  - platform: state
    entity_id: !input input_boolean

action:
  - if:
      - condition: state
        entity_id: !input input_boolean
        state: "on"
    then:
      - service: light.turn_off
        target:
          entity_id: !input lights

  - if:
      - condition: state
        entity_id: !input input_boolean
        state: "off"
    then:
      - service: light.turn_on
        target:
          entity_id: !input lights
