blueprint:
  name: Wood Stove Cooling Notification
  description: Sends a notification when the wood stove transitions from burning to cooling down after a delay.
  domain: automation
  input:
    stove_state_helper:
      name: Stove State Helper
      description: The input_select entity tracking the stove state.
      selector:
        entity:
          domain: input_select
    notify_device:
      name: Notification Device
      description: The device to send the notification to.
      selector:
        entity:
          domain: notify
    delay_time:
      name: Delay Time (minutes)
      description: Time to wait before sending the notification.
      default: 5
      selector:
        number:
          min: 1
          max: 60
          unit_of_measurement: "minutes"

mode: restart
max_exceeded: silent

trigger:
  - platform: state
    entity_id: !input stove_state_helper
    from: "Burning"
    to: "Cooling Down"

action:
  - delay: "{{ (input.delay_time * 60) | int }}"
  - service: notify
    target:
      entity_id: !input notify_device
    data:
      message: "The wood stove is hungry.  Feed him!."
